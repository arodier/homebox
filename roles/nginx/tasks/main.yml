---

- name: Install the base required packages
  include_tasks: packages.yml

- name: Copy the default certificates
  include_tasks: certificates.yml
  tags: certs

- name: Configure the package
  include_tasks: config.yml
  tags: config

- name: Copy the default content site
  include_tasks: default-content.yml
  tags: site, config

- name: Create the default DNS entries
  include_tasks: dns.yml
  tags: dns

- name: Add Prometheus alerts
  when: prometheus.install
  include_tasks: prometheus.yml
  tags: prometheus

- name: Add pam authentication module
  include_tasks: pam.yml

- name: Create the firewall rules
  include_tasks: nftables.yml

- name: Configure AppArmor
  include_tasks: apparmor.yml
