---

- name: Get the public external IPv4
  delegate_to: localhost
  become: false
  set_fact:
    public_ext_ip4: '{{ lookup("pipe", "curl -4 https://icanhazip.com") }}'
  tags: facts

- name: Get the public external IPv6
  delegate_to: localhost
  become: false
  set_fact:
    public_ext_ip6: '{{ lookup("pipe", "curl -6 https://icanhazip.com") }}'
  tags: facts
