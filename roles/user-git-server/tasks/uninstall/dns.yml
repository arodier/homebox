---

- name: Delete the DNS entries for the main record
  vars:
    dns_records:
      - name: git
        type: '{{ external_ip_type }}'
        value: '{{ external_ip }}'
  ansible.builtin.include_role:
    name: dns-record
    tasks_from: uninstall/main.yml
    apply:
      tags:
        - always
  tags: dns

- name: Delete the DNS entries for the backup record
  when: backup_ip is defined
  vars:
    dns_records:
      - name: git
        type: '{{ backup_ip_type }}'
        value: '{{ backup_ip }}'
  ansible.builtin.include_role:
    name: dns-record
    tasks_from: uninstall/main.yml
    apply:
      tags:
        - always
  tags: dns
