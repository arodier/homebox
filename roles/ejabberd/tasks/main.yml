---

- name: Load some facts
  include_tasks: facts.yml

- name: Install the packages
  include_tasks: packages.yml

- name: Configure the database
  include_tasks: database.yml

- name: Deploy the certificates
  include_tasks: certificates.yml

- name: Push the configuration
  include_tasks: config.yml

- name: Configure web access
  include_tasks: webaccess.yml

- name: Configure AppArmor
  include_tasks: apparmor.yml

- name: Configure DNS records
  include_tasks: dns.yml

- name: Add Prometheus alerts
  tags: prometheus
  include_tasks: prometheus.yml

- name: Deply the firewall rules
  include_tasks: firewall.yml
