---

apparmor:
  profiles:
    - local/usr.lib.dovecot.auth
    - local/usr.lib.dovecot.config
    - local/usr.lib.dovecot.imap
    - local/usr.lib.dovecot.lmtp
    - local/usr.lib.dovecot.managesieve
    - local/usr.lib.dovecot.pop3
    - local/usr.lib.dovecot.quota-status
    - local/usr.sbin.dovecot
    - tunables/dovecot
    - usr.bin.logger
    - usr.lib.dovecot.auth
    - usr.lib.dovecot.anvil
    - usr.lib.dovecot.dict
    - usr.lib.dovecot.dovecot-lda
    - usr.lib.dovecot.imap
    - usr.lib.dovecot.imap-login
    - usr.lib.dovecot.log
    - usr.lib.dovecot.managesieve
    - usr.lib.dovecot.managesieve-login
    - usr.lib.dovecot.pop3
    - usr.lib.dovecot.pop3-login
    - usr.lib.dovecot.ssl-params
    - usr.lib.dovecot.quota-status
    - usr.lib.dovecot.script
    - usr.lib.dovecot.script-login
    - usr.lib.dovecot.stats
    - usr.local.sbin.dovecot-postlogin


# Default dovecot packages to install
dovecot:
  packages:
    - dovecot-core
    - dovecot-imapd
    - dovecot-ldap
    - dovecot-lmtpd
    - dovecot-managesieved
    - dovecot-pop3d
    - dovecot-sieve
  fts_packages:
    - catdoc
    - docx2txt
    - dovecot-fts-xapian
    - gzip
    - odt2txt
    - p7zip-full
    - poppler-utils
    - tnef
    - unrar-free
    - unrtf
    - unzip
    - xlsx2csv
  access_check_packages:
    - curl
    - grepcidr
    - sqlite3
  settings:
    mail_max_userip_connections: 64
    lda_mailbox_autocreate: no
    lda_mailbox_autosubscribe: no
  # Authorized characters for the username
  username_chars: abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ01234567890.-_@
  # Since Debian Buster, these profiles are included in apparmor-proofiles-extra
  apparmor_system_profiles:
    - usr.lib.dovecot.anvil
    - usr.lib.dovecot.auth
    - usr.lib.dovecot.config
    - usr.lib.dovecot.deliver
    - usr.lib.dovecot.dict
    - usr.lib.dovecot.dovecot-auth
    - usr.lib.dovecot.dovecot-lda
    - usr.lib.dovecot.imap
    - usr.lib.dovecot.imap-login
    - usr.lib.dovecot.lmtp
    - usr.lib.dovecot.log
    - usr.lib.dovecot.managesieve
    - usr.lib.dovecot.managesieve-login
    - usr.lib.dovecot.pop3
    - usr.lib.dovecot.pop3-login
    - usr.lib.dovecot.ssl-params
    - usr.sbin.dovecot


# Default dovecot folders to create
user_folders:
  - INBOX
  - Sent
