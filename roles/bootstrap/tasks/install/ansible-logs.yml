---

- name: Ensure rsyslog is installed
  apt:
    name: rsyslog
    state: present

- name: Deploy the system log configuration
  register: rsyslog_config
  ansible.builtin.template:
    src: ansible-logs.conf
    dest: /etc/rsyslog.d/ansible.conf

- name: Restart rsyslog now
  when: rsyslog_config.changed
  systemd:
    name: rsyslog
    state: restarted
