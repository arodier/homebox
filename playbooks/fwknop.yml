---

# fwknop client/server SPA (Single Packet Authorization)
- name: Install fwknop executable on the client host
  hosts: localhost
  vars_files:
    - '{{ playbook_dir }}/../config/system.yml'
    - '{{ playbook_dir }}/../config/defaults.yml'
  roles:
    - role: load-defaults
      tags: always
    - role: fwknop-client
      when: firewall.fwknop.install

- name: Install fwknop server on the remote host
  hosts: homebox
  vars_files:
    - '{{ playbook_dir }}/../config/system.yml'
    - '{{ playbook_dir }}/../config/defaults.yml'
  roles:
    - role: load-defaults
      tags: always
    - role: fwknop-server
      when: firewall.fwknop.install
